{% extends "base_admin.html" %}
{% load static %}

{% block title %}Branch Management · GlamUp Nails{% endblock %}

{% block head_extra %}
<style>

  .toolbar{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
    margin-bottom:14px;
  }

  .search-wrap{
    display:flex;
    align-items:center;
    gap:8px;
  }

  .search-wrap input{
    min-width:320px;
  }

  .table thead th{
    font-weight:900;
    color:var(--ink);
  }

  /* ===== Branch table layout ===== */
  .branch-table{
    table-layout:fixed;
  }

  .branch-table th,
  .branch-table td{
    vertical-align:middle;
    padding-top:.7rem;
    padding-bottom:.7rem;
  }

  /* Chia tỉ lệ cột: Name / Address / Phone / Actions */
  .branch-table th:nth-child(1),
  .branch-table td:nth-child(1){
    width:18%;
  }

  .branch-table th:nth-child(2),
  .branch-table td:nth-child(2){
    width:50%;
  }

  .branch-table th:nth-child(3),
  .branch-table td:nth-child(3){
    width:17%;
  }

  .branch-table th:nth-child(4),
  .branch-table td:nth-child(4){
    width:15%;
  }

  /* Viền mảnh giữa các dòng */
  .branch-table tbody tr + tr td{
    border-top:1px solid #ecefe0;
  }

  /* Hover từng dòng cho dễ nhìn */
  .branch-table tbody tr:hover{
    background:#fbfbf3;
  }
</style>
{% endblock %}

{% block content %}
<div class="row g-4">

  <!-- Sidebar Admin -->
  <div class="col-lg-3 col-md-4">
    {% include 'includes/_sidebar_admin.html' with active='branch' %}
  </div>

  <!-- MAIN CONTENT -->
  <div class="col-lg-9 col-md-8">
    {% block main %}
    <div class="container-fluid px-0 px-md-2">

          <h1 class="h4 mb-3 fw-bold text-center">BRANCH MANAGEMENT</h1>


      <div class="toolbar">
        <a class="btn btn-brand fw-bold" href="{% url 'main:branch_create' %}">
          <span class="me-1">+</span> Add New
        </a>

        <form method="get" class="search-wrap">
          <input type="text" name="q" value="{{ q }}" class="form-control"
                 placeholder="Search name, address, phone...">
          <button class="btn btn-outline-brand" type="submit">Search</button>
        </form>
      </div>

      <div class="mb-2 text-muted">Total ({{ total }})</div>

      <div class="table-responsive border rounded">
        <table class="table align-middle mb-0 branch-table">
          <thead class="table-light">
            <tr>
              <th class="text-start">Name</th>
              <th class="text-start">Address</th>
              <th class="text-center">Phone</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>

          <tbody>
            {% for b in page_obj %}
            <tr>
              <td class="fw-semibold text-start">{{ b.name }}</td>
              <td class="text-start">{{ b.address }}</td>
              <td class="text-center">{{ b.phone }}</td>
              <td class="text-center">
                <a class="btn btn-sm btn-outline-brand"
                   href="{% url 'main:branch_update' b.pk %}">Edit</a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="text-center py-4 text-muted">No branches yet.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      {% if page_obj.paginator.num_pages > 1 %}
      <nav class="mt-3">
        <ul class="pagination justify-content-center">
          {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?q={{ q }}&page={{ page_obj.previous_page_number }}">«</a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <span class="page-link">«</span>
          </li>
          {% endif %}

          <li class="page-item active">
            <span class="page-link">{{ page_obj.number }}</span>
          </li>

          {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?q={{ q }}&page={{ page_obj.next_page_number }}">»</a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <span class="page-link">»</span>
          </li>
          {% endif %}
        </ul>
      </nav>
      {% endif %}

    </div>
    {% endblock %}
  </div>
</div>
{% endblock %}
